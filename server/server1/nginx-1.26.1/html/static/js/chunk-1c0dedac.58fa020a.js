(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c0dedac"],{"6e3c":function(t,e,s){"use strict";s("800f")},"800f":function(t,e,s){},f943:function(t,e,s){"use strict";s.r(e);s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"logo"}),e("div",{staticClass:"content"},[e("div",{staticClass:"pic"}),e("div",{staticClass:"field"},[t._m(0),e("div",{staticClass:"form-cont"},[e("el-tabs",{staticClass:"form",staticStyle:{float:"none"},attrs:{value:"uname"}},[e("el-tab-pane",{attrs:{label:"三方授权（"+t.client.name+")",name:"uname"}})],1),e("div",[e("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm}},[t._v(" 此第三方应用请求获得以下权限： "),e("el-form-item",{attrs:{prop:"scopes"}},[e("el-checkbox-group",{model:{value:t.loginForm.scopes,callback:function(e){t.$set(t.loginForm,"scopes",e)},expression:"loginForm.scopes"}},t._l(t.params.scopes,(function(s){return e("el-checkbox",{key:s,staticStyle:{display:"block","margin-bottom":"-10px"},attrs:{label:s}},[t._v(t._s(t.formatScope(s)))])})),1)],1),e("el-form-item",{staticStyle:{width:"100%"}},[e("el-button",{staticStyle:{width:"60%"},attrs:{loading:t.loading,size:"medium",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleAuthorize(!0)}}},[t.loading?e("span",[t._v("授 权 中...")]):e("span",[t._v("同意授权")])]),e("el-button",{staticStyle:{width:"36%"},attrs:{size:"medium"},nativeOn:{click:function(e){return e.preventDefault(),t.handleAuthorize(!1)}}},[t._v("拒绝")])],1)],1)],1)],1)])]),e("div",{staticClass:"footer"},[t._v(" Copyright © 2023 四川彦祖科技有限公司 All Rights Reserved. ")])])},i=[function(){var t=this,e=t._self._c;return e("h2",{staticClass:"mobile-title"},[e("h3",{staticClass:"title"},[t._v("芋道后台管理系统")])])}],r=s("b85c"),o=(s("14d9"),s("4de4"),s("d3b7"),s("7ded")),n={name:"Login",data:function(){return{loginForm:{scopes:[]},params:{responseType:void 0,clientId:void 0,redirectUri:void 0,state:void 0,scopes:[]},client:{name:"",logo:""},loading:!1}},created:function(){var t=this;this.params.responseType=this.$route.query.response_type,this.params.clientId=this.$route.query.client_id,this.params.redirectUri=this.$route.query.redirect_uri,this.params.state=this.$route.query.state,this.$route.query.scope&&(this.params.scopes=this.$route.query.scope.split(" ")),this.params.scopes.length>0&&this.doAuthorize(!0,this.params.scopes,[]).then((function(t){var e=t.data;e?location.href=e:console.log("自动授权未通过！")})),Object(o["b"])(this.params.clientId).then((function(e){var s;if(t.client=e.data.client,t.params.scopes.length>0){s=[];var a,i=Object(r["a"])(e.data.scopes);try{for(i.s();!(a=i.n()).done;){var o=a.value;t.params.scopes.indexOf(o.key)>=0&&s.push(o)}}catch(h){i.e(h)}finally{i.f()}}else{s=e.data.scopes;var n,c=Object(r["a"])(s);try{for(c.s();!(n=c.n()).done;){var l=n.value;t.params.scopes.push(l.key)}}catch(h){c.e(h)}finally{c.f()}}var u,p=Object(r["a"])(s);try{for(p.s();!(u=p.n()).done;){var d=u.value;d.value&&t.loginForm.scopes.push(d.key)}}catch(h){p.e(h)}finally{p.f()}}))},methods:{handleAuthorize:function(t){var e=this;this.$refs.loginForm.validate((function(s){var a,i;s&&(e.loading=!0,t?(a=e.loginForm.scopes,i=e.params.scopes.filter((function(t){return-1===a.indexOf(t)}))):(a=[],i=e.params.scopes),e.doAuthorize(!1,a,i).then((function(t){var e=t.data;e&&(location.href=e)})).finally((function(){e.loading=!1})))}))},doAuthorize:function(t,e,s){return Object(o["a"])(this.params.responseType,this.params.clientId,this.params.redirectUri,this.params.state,t,e,s)},formatScope:function(t){switch(t){case"user.read":return"访问你的个人信息";case"user.write":return"修改你的个人信息";default:return t}}}},c=n,l=(s("6e3c"),s("2877")),u=Object(l["a"])(c,a,i,!1,null,"0ad0d926",null);e["default"]=u.exports}}]);